import{a as B,b as L}from"./runtime-dom.esm-bundler.BSrPnuAF.js";import{_ as h}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as n,o as l,a as s,b as v,F as P,r as w,d as g,w as S,t as u,e as N,f,g as A,m as U,n as V,h as k,i as z,j as O,k as Q,l as x,p as j,q as F}from"./runtime-core.esm-bundler.Dc5g95Qm.js";import{b as C}from"./eventBus.BlrVpIA5.js";const D={__name:"ProductFilters",props:{categories:{type:Array,required:!0,validator:a=>a.every(e=>typeof e=="object"&&e.name&&e.id)},properties:{type:Array,required:!0},selectedCategories:{type:Array,default:()=>[]},selectedProperties:{type:Array,default:()=>[]}},emits:["update:selectedCategories","update:selectedProperties","update:maxPrice"],setup(a,{expose:e,emit:t}){e();const r=a,i=t,d=g({get:()=>r.selectedCategories,set:m=>i("update:selectedCategories",m)}),o=g({get:()=>r.selectedProperties,set:m=>i("update:selectedProperties",m)}),y={props:r,emit:i,computedSelectedCategories:d,computedSelectedProperties:o,formatId:m=>m.replace(/\.[^/.]+$/,"").replace(/\s+/g,"-").toLowerCase(),clearFilters:()=>{i("update:selectedCategories",[]),i("update:selectedProperties",[])},computed:g};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}},M={class:"bg-white rounded-xl shadow-md p-6 sticky top-24"},T={class:"mb-8"},W={class:"space-y-2"},E=["id","value"],R=["for"],G={class:"mb-8"},H={class:"space-y-2"},J=["id","value"],K=["for"];function X(a,e,t,r,i,d){return l(),n("div",M,[e[4]||(e[4]=s("h2",{class:"text-xl font-bold mb-6 pb-3 border-b border-gray-200 flex items-center"},[s("span",{class:"material-symbols-outlined mr-2 text-primary-600"},"filter_alt"),v(" Filters ")],-1)),s("div",T,[e[2]||(e[2]=s("h3",{class:"font-semibold text-lg mb-3 text-gray-800"},"Categories",-1)),s("div",W,[(l(!0),n(P,null,w(r.props.categories,o=>(l(),n("div",{key:o.id,class:"flex items-center"},[S(s("input",{type:"checkbox",id:`category-${r.formatId(o.id)}`,value:o.id,"onUpdate:modelValue":e[0]||(e[0]=c=>r.computedSelectedCategories=c),class:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"},null,8,E),[[B,r.computedSelectedCategories]]),s("label",{for:`category-${r.formatId(o.id)}`,class:"ml-2 text-sm text-gray-700"},u(o.name),9,R)]))),128))])]),s("div",G,[e[3]||(e[3]=s("h3",{class:"font-semibold text-lg mb-3 text-gray-800"},"Properties",-1)),s("div",H,[(l(!0),n(P,null,w(r.props.properties,o=>(l(),n("div",{key:o,class:"flex items-center"},[S(s("input",{type:"checkbox",id:`property-${r.formatId(o)}`,value:o,"onUpdate:modelValue":e[1]||(e[1]=c=>r.computedSelectedProperties=c),class:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"},null,8,J),[[B,r.computedSelectedProperties]]),s("label",{for:`property-${r.formatId(o)}`,class:"ml-2 text-sm text-gray-700"},u(o),9,K)]))),128))])]),s("button",{onClick:r.clearFilters,class:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-md font-medium transition-colors duration-200"}," Clear Filters ")])}const Y=h(D,[["render",X]]),q="inline-flex items-center justify-center font-medium rounded-full transition-all duration-300 transform hover:-translate-y-1",Z=N({__name:"Button",props:{variant:{default:"primary"},href:{},size:{default:"md"},external:{type:Boolean,default:!1},class:{default:""},fullWidth:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},iconBefore:{},iconAfter:{},ariaLabel:{},type:{default:"button"},form:{},name:{},value:{}},setup(a,{expose:e}){e();const t=a,r={sm:"px-6 py-2 text-sm",md:"px-8 py-3",lg:"px-10 py-4 text-lg"},i={primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-lg hover:shadow-xl",secondary:"bg-white border-2 border-primary-600 text-primary-600 hover:bg-primary-50 shadow-md hover:shadow-lg",outline:"bg-transparent border-2 border-primary-600 text-primary-600 hover:bg-primary-50 shadow-sm hover:shadow",text:"bg-transparent text-primary-600 hover:text-primary-700 hover:bg-primary-50/30"},d=g(()=>[q,r[t.size],i[t.variant],t.fullWidth?"w-full":"",t.disabled?"opacity-60 cursor-not-allowed pointer-events-none":"",t.class].join(" ")),o=g(()=>t.external?{target:"_blank",rel:"noopener noreferrer"}:{}),c={props:t,baseStyles:q,sizeStyles:r,variantStyles:i,buttonStyles:d,externalAttrs:o};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),$=["href","aria-label"],ee={key:0,class:"material-symbols-outlined mr-2 text-[1em]"},te={key:1,class:"material-symbols-outlined ml-2 text-[1em]"},re=["type","disabled","aria-label","form","name","value"],se={key:0,class:"material-symbols-outlined mr-2 text-[1em]"},oe={key:1,class:"material-symbols-outlined ml-2 text-[1em]"};function ae(a,e,t,r,i,d){return t.href&&!t.disabled?(l(),n("a",U({key:0,href:t.href,class:r.buttonStyles,"aria-label":t.ariaLabel},r.externalAttrs),[t.iconBefore?(l(),n("span",ee,u(t.iconBefore),1)):f("",!0),A(a.$slots,"default"),t.iconAfter?(l(),n("span",te,u(t.iconAfter),1)):f("",!0)],16,$)):(l(),n("button",{key:1,class:V(r.buttonStyles),type:t.type,disabled:t.disabled,"aria-label":t.ariaLabel,form:t.form,name:t.name,value:t.value},[t.iconBefore?(l(),n("span",se,u(t.iconBefore),1)):f("",!0),A(a.$slots,"default"),t.iconAfter?(l(),n("span",oe,u(t.iconAfter),1)):f("",!0)],10,re))}const ie=h(Z,[["render",ae]]),le={__name:"ProductCard",props:{product:{type:Object,required:!0},categoryName:{type:String,required:!0}},setup(a,{expose:e}){e();const t=a,r=g(()=>{const d=[];let o=0;const c=3;if(t.product.variations)for(const p of t.product.variations){if(p.properties)for(const y of p.properties)if(o<c)d.push({variationId:p.id,property:y}),o++;else break;if(o>=c)break}return d}),i={props:t,displayedProperties:r,computed:g,Button:ie};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},de={class:"bg-white rounded-xl shadow-lg overflow-hidden group hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1"},ne={class:"h-48 overflow-hidden relative"},ce={key:0,class:"absolute top-0 right-0 bg-secondary-500 text-white px-3 py-1 z-10 rounded-bl-lg font-medium"},ue=["src","alt"],pe={class:"absolute bottom-0 left-0 p-4 text-white transform translate-y-full group-hover:translate-y-0 transition-all duration-300"},me={key:0,class:"font-medium"},ye={class:"p-6"},fe={class:"flex justify-between items-start mb-2"},ge={class:"text-xl font-bold"},_e={class:"mb-4"},be={class:"text-sm bg-primary-100 text-primary-700 px-2 py-1 rounded-full"},he={class:"flex flex-wrap gap-2 mb-4"};function xe(a,e,t,r,i,d){return l(),n("div",de,[s("div",ne,[t.product.featured?(l(),n("div",ce," Featured ")):f("",!0),s("img",{src:t.product.thumbnail.src,alt:t.product.thumbnail.alt||`${t.product.name} thumbnail`,class:"w-full h-full object-cover group-hover:scale-110 transition-all duration-500"},null,8,ue),e[0]||(e[0]=s("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"},null,-1)),s("div",pe,[t.product.variations&&t.product.variations.length>0?(l(),n("p",me,u(t.product.variations[0].description.split(`
`)[0]),1)):f("",!0)])]),s("div",ye,[s("div",fe,[s("h3",ge,u(t.product.name),1)]),s("div",_e,[s("span",be,u(t.categoryName),1)]),s("div",he,[(l(!0),n(P,null,w(r.displayedProperties,o=>(l(),n("span",{key:`${o.variationId}-${o.property}`,class:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full"},u(o.property),1))),128))]),k(r.Button,{href:`/products/${t.product.id}`,variant:"primary",size:"sm",classes:"w-full justify-center"},{default:z(()=>e[1]||(e[1]=[v(" View Details ")])),_:1},8,["href"])])])}const ve=h(le,[["render",xe]]),Pe={components:{ProductCard:ve},props:{products:{type:Array,required:!0},categories:{type:Array,required:!0,validator:a=>a.every(e=>typeof e=="object"&&e.name&&e.id)},searchQuery:{type:String,default:""},selectedCategories:{type:Array,default:()=>[]},selectedProperties:{type:Array,default:()=>[]}},data(){return{sortBy:"featured"}},computed:{filteredProducts(){return this.products.filter(a=>{const e=this.searchQuery===""||a.name.toLowerCase().includes(this.searchQuery.toLowerCase()),t=this.selectedCategories.length===0||this.selectedCategories.includes(a.category),r=this.selectedProperties.length===0||a.variations&&a.variations.some(i=>this.selectedProperties.every(d=>i.properties.includes(d)));return e&&t&&r})},sortedProducts(){return[...this.filteredProducts].sort((a,e)=>this.sortBy==="name"?a.name.localeCompare(e.name):(e.featured?1:0)-(a.featured?1:0))}},methods:{getCategoryName(a){const e=this.categories.find(t=>t.id===a);return e?e.name:"Uncategorized"}}},we={class:"flex justify-between items-center mb-6"},Ce={class:"text-gray-700"},Se={class:"font-semibold"},ke={class:"flex items-center"},Be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ae={key:0,class:"text-center py-12"};function je(a,e,t,r,i,d){const o=O("product-card");return l(),n("div",null,[s("div",we,[s("div",Ce,[e[1]||(e[1]=v(" Showing ")),s("span",Se,u(d.filteredProducts.length),1),e[2]||(e[2]=v(" products "))]),s("div",ke,[e[4]||(e[4]=s("label",{for:"sort-by",class:"text-sm mr-2 text-gray-600"},"Sort by:",-1)),S(s("select",{id:"sort-by","onUpdate:modelValue":e[0]||(e[0]=c=>i.sortBy=c),class:"border border-gray-300 rounded-md text-sm p-2 focus:ring-primary-500 focus:border-primary-500"},e[3]||(e[3]=[s("option",{value:"featured"},"Featured",-1),s("option",{value:"name"},"Name",-1)]),512),[[L,i.sortBy]])])]),s("div",Be,[(l(!0),n(P,null,w(d.sortedProducts,c=>(l(),Q(o,{key:c.id,product:c,"category-name":d.getCategoryName(c.category)},null,8,["product","category-name"]))),128))]),d.filteredProducts.length===0?(l(),n("div",Ae,e[5]||(e[5]=[s("span",{class:"material-symbols-outlined text-5xl text-gray-400 mb-4"},"search_off",-1),s("h3",{class:"text-xl font-bold text-gray-700"},"No products found",-1),s("p",{class:"text-gray-600 mt-2"},"Try adjusting your search or filters to find products.",-1)]))):f("",!0)])}const Fe=h(Pe,[["render",je]]),qe={__name:"ProductPage",props:{products:{type:Array,required:!0},categories:{type:Array,required:!0,validator:a=>a.every(e=>typeof e=="object"&&e.name&&e.id)},properties:{type:Array,required:!0}},setup(a,{expose:e}){e();const t=a;console.log("ProductPage props:",t);const r=x(""),i=x([]),d=x([]),o=p=>{r.value=p};j(()=>{const p=new URLSearchParams(window.location.search);C.on("search-updated",o);const y=p.get("category");if(y){const _=y.split(",").map(b=>b.trim()),I=t.categories.map(b=>b.id);i.value=_.filter(b=>I.includes(b))}const m=p.get("property");m&&(d.value=m.split(",").map(_=>_.trim()).filter(_=>t.properties.includes(_)))}),F(()=>{C.off("search-updated",o)});const c={props:t,searchQuery:r,selectedCategories:i,selectedProperties:d,handleSearchUpdate:o,ref:x,onMounted:j,onUnmounted:F,ProductFilters:Y,ProductList:Fe,get eventBus(){return C}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},Ie={class:"flex flex-col md:flex-row gap-8"},Le={class:"md:w-1/4"},Ne={class:"md:w-3/4"};function Ue(a,e,t,r,i,d){return l(),n("div",Ie,[s("div",Le,[k(r.ProductFilters,{categories:r.props.categories,properties:r.props.properties,selectedCategories:r.selectedCategories,"onUpdate:selectedCategories":e[0]||(e[0]=o=>r.selectedCategories=o),selectedProperties:r.selectedProperties,"onUpdate:selectedProperties":e[1]||(e[1]=o=>r.selectedProperties=o)},null,8,["categories","properties","selectedCategories","selectedProperties"])]),s("div",Ne,[k(r.ProductList,{products:r.props.products,categories:r.props.categories,"search-query":r.searchQuery,"selected-categories":r.selectedCategories,"selected-properties":r.selectedProperties},null,8,["products","categories","search-query","selected-categories","selected-properties"])])])}const De=h(qe,[["render",Ue]]);export{De as default};
