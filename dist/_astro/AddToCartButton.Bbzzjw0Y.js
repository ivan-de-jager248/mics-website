import{g as b,a as y}from"./cart.DI_PV2g1.js";import{_ as V}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{e as I,c as g,l as m,d as x,p as k,q as A,s as E,o as C}from"./runtime-core.esm-bundler.Dc5g95Qm.js";const T=I({__name:"AddToCartButton",props:{product:{},initialVariationId:{},initialVariationName:{},variations:{}},setup(f,{expose:p}){p();const d=(n,e)=>e?`${n}_${e}`:n,t=f,a=m(!1),o=m(t.initialVariationId),r=m(t.initialVariationName),i=x(()=>d(t.product.id,o.value));console.log(`Initial cart item ID: ${i.value}`);const s=()=>{const n=b();a.value=n.items.some(e=>e.id===i.value),console.log(`Checking cart status for ${i.value}: ${a.value}`)},w=()=>{y(t.product,1,o.value,r.value)},h=()=>{window.dispatchEvent(new Event("open-cart"))},c=()=>{console.log("Storage event detected in AddToCartButton"),s()},l=n=>{const e=n.detail;if(console.log("variation-selected event detected in AddToCartButton, new ID:",e),o.value!==e){o.value=e;const u=t.variations.find(_=>_.id===e);u?(r.value=u.name,console.log("Updated currentVariationName to:",u.name)):(r.value=void 0,console.warn(`Variation with ID ${e} not found in provided variations array.`))}};k(()=>{s(),window.addEventListener("storage",c),window.addEventListener("variation-selected",l)}),A(()=>{window.removeEventListener("storage",c),window.removeEventListener("variation-selected",l)}),E(o,(n,e)=>{n!==e&&(console.log("Internal Variation ID changed, checking cart status..."),s())},{immediate:!1});const v={generateCartItemId:d,props:t,isInCart:a,currentVariationId:o,currentVariationName:r,currentCartItemId:i,checkCartStatus:s,handleAddToCart:w,handleViewCartClick:h,handleStorageChange:c,handleVariationSelected:l};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}});function $(f,p,d,t,a,o){return t.isInCart?(C(),g("button",{key:0,onClick:t.handleViewCartClick,type:"button",class:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors"}," View Cart ")):(C(),g("button",{key:1,onClick:t.handleAddToCart,type:"button",class:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-secondary-600 hover:bg-secondary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary-500 transition-colors"}," Add to Cart "))}const L=V(T,[["render",$]]);export{L as default};
