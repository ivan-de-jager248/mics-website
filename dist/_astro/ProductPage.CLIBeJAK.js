import{b as B,v as N}from"./runtime-dom.esm-bundler.BvQxHKbO.js";import{_ as v}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{c as l,o as i,a as s,l as w,F as f,r as x,g as S,t as u,i as b,h as U,b as p,m as A,p as I,n as V,d as k,w as z,q as O,s as Q,e as P,j,k as F}from"./runtime-core.esm-bundler.nQyrMkWx.js";import{b as C}from"./eventBus.BlrVpIA5.js";const D={__name:"ProductFilters",props:{categories:{type:Array,required:!0,validator:o=>o.every(e=>typeof e=="object"&&e.name&&e.id)},properties:{type:Array,required:!0},selectedCategories:{type:Array,default:()=>[]},selectedProperties:{type:Array,default:()=>[]}},emits:["update:selectedCategories","update:selectedProperties","update:maxPrice"],setup(o,{expose:e,emit:t}){e();const r=o,d=t,c=b({get:()=>r.selectedCategories,set:m=>d("update:selectedCategories",m)}),a=b({get:()=>r.selectedProperties,set:m=>d("update:selectedProperties",m)}),_={props:r,emit:d,computedSelectedCategories:c,computedSelectedProperties:a,formatId:m=>m.replace(/\.[^/.]+$/,"").replace(/\s+/g,"-").toLowerCase(),clearFilters:()=>{d("update:selectedCategories",[]),d("update:selectedProperties",[])},computed:b};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},M={class:"bg-white rounded-xl shadow-md p-6 sticky top-24"},H={class:"mb-8"},T={class:"space-y-2"},W=["id","value"],E=["for"],R={class:"mb-8"},G={class:"space-y-2"},J=["id","value"],K=["for"];function X(o,e,t,r,d,c){return i(),l("div",M,[e[4]||(e[4]=s("h2",{class:"text-xl font-bold mb-6 pb-3 border-b border-gray-200 flex items-center"},[s("span",{class:"material-symbols-outlined mr-2 text-primary-600"},"filter_alt"),w(" Filters ")],-1)),s("div",H,[e[2]||(e[2]=s("h3",{class:"font-semibold text-lg mb-3 text-gray-800"},"Categories",-1)),s("div",T,[(i(!0),l(f,null,x(r.props.categories,a=>(i(),l("div",{key:a.id,class:"flex items-center"},[S(s("input",{type:"checkbox",id:`category-${r.formatId(a.id)}`,value:a.id,"onUpdate:modelValue":e[0]||(e[0]=n=>r.computedSelectedCategories=n),class:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"},null,8,W),[[B,r.computedSelectedCategories]]),s("label",{for:`category-${r.formatId(a.id)}`,class:"ml-2 text-sm text-gray-700"},u(a.name),9,E)]))),128))])]),s("div",R,[e[3]||(e[3]=s("h3",{class:"font-semibold text-lg mb-3 text-gray-800"},"Properties",-1)),s("div",G,[(i(!0),l(f,null,x(r.props.properties,a=>(i(),l("div",{key:a,class:"flex items-center"},[S(s("input",{type:"checkbox",id:`property-${r.formatId(a)}`,value:a,"onUpdate:modelValue":e[1]||(e[1]=n=>r.computedSelectedProperties=n),class:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"},null,8,J),[[B,r.computedSelectedProperties]]),s("label",{for:`property-${r.formatId(a)}`,class:"ml-2 text-sm text-gray-700"},u(a),9,K)]))),128))])]),s("button",{onClick:r.clearFilters,class:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-md font-medium transition-colors duration-200"}," Clear Filters ")])}const Y=v(D,[["render",X]]),q="inline-flex items-center justify-center font-medium rounded-full transition-all duration-300 transform hover:-translate-y-1",Z=U({__name:"Button",props:{variant:{default:"primary"},href:{},size:{default:"md"},external:{type:Boolean,default:!1},class:{default:""},fullWidth:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},iconBefore:{},iconAfter:{},ariaLabel:{},type:{default:"button"},form:{},name:{},value:{}},setup(o,{expose:e}){e();const t=o,r={sm:"px-6 py-2 text-sm",md:"px-8 py-3",lg:"px-10 py-4 text-lg"},d={primary:"bg-primary-600 hover:bg-primary-700 text-white shadow-lg hover:shadow-xl",secondary:"bg-white border-2 border-primary-600 text-primary-600 hover:bg-primary-50 shadow-md hover:shadow-lg",outline:"bg-transparent border-2 border-primary-600 text-primary-600 hover:bg-primary-50 shadow-sm hover:shadow",text:"bg-transparent text-primary-600 hover:text-primary-700 hover:bg-primary-50/30"},c=b(()=>[q,r[t.size],d[t.variant],t.fullWidth?"w-full":"",t.disabled?"opacity-60 cursor-not-allowed pointer-events-none":"",t.class].join(" ")),a=b(()=>t.external?{target:"_blank",rel:"noopener noreferrer"}:{}),n={props:t,baseStyles:q,sizeStyles:r,variantStyles:d,buttonStyles:c,externalAttrs:a};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),$=["href","aria-label"],ee={key:0,class:"material-symbols-outlined mr-2 text-[1em]"},te={key:1,class:"material-symbols-outlined ml-2 text-[1em]"},re=["type","disabled","aria-label","form","name","value"],se={key:0,class:"material-symbols-outlined mr-2 text-[1em]"},oe={key:1,class:"material-symbols-outlined ml-2 text-[1em]"};function ae(o,e,t,r,d,c){return t.href&&!t.disabled?(i(),l("a",I({key:0,href:t.href,class:r.buttonStyles,"aria-label":t.ariaLabel},r.externalAttrs),[t.iconBefore?(i(),l("span",ee,u(t.iconBefore),1)):p("",!0),A(o.$slots,"default"),t.iconAfter?(i(),l("span",te,u(t.iconAfter),1)):p("",!0)],16,$)):(i(),l("button",{key:1,class:V(r.buttonStyles),type:t.type,disabled:t.disabled,"aria-label":t.ariaLabel,form:t.form,name:t.name,value:t.value},[t.iconBefore?(i(),l("span",se,u(t.iconBefore),1)):p("",!0),A(o.$slots,"default"),t.iconAfter?(i(),l("span",oe,u(t.iconAfter),1)):p("",!0)],10,re))}const ie=v(Z,[["render",ae]]),le={__name:"ProductCard",props:{product:{type:Object,required:!0},categoryName:{type:String,required:!0}},setup(o,{expose:e}){e();const t={Button:ie};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}},de={class:"bg-white rounded-xl shadow-lg overflow-hidden group hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1"},ne={class:"h-48 overflow-hidden relative"},ce={key:0,class:"absolute top-0 right-0 bg-secondary-500 text-white px-3 py-1 z-10 rounded-bl-lg font-medium"},ue=["src","alt"],me={class:"absolute bottom-0 left-0 p-4 text-white transform translate-y-full group-hover:translate-y-0 transition-all duration-300"},pe={key:0,class:"font-medium"},ye={class:"p-6"},fe={class:"flex justify-between items-start mb-2"},ge={class:"text-xl font-bold"},_e={class:"mb-4"},he={class:"text-sm bg-primary-100 text-primary-700 px-2 py-1 rounded-full"},be={class:"flex flex-wrap gap-2 mb-4"};function xe(o,e,t,r,d,c){return i(),l("div",de,[s("div",ne,[t.product.featured?(i(),l("div",ce," Featured ")):p("",!0),s("img",{src:t.product.thumbnail.src,alt:t.product.thumbnail.alt||`${t.product.name} thumbnail`,class:"w-full h-full object-cover group-hover:scale-110 transition-all duration-500"},null,8,ue),e[0]||(e[0]=s("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"},null,-1)),s("div",me,[t.product.variations&&t.product.variations.length>0?(i(),l("p",pe,u(t.product.variations[0].description.split(`
`)[0]),1)):p("",!0)])]),s("div",ye,[s("div",fe,[s("h3",ge,u(t.product.name),1)]),s("div",_e,[s("span",he,u(t.categoryName),1)]),s("div",be,[t.product.variations?(i(!0),l(f,{key:0},x(t.product.variations,a=>(i(),l(f,{key:a.id},[(i(!0),l(f,null,x(a.properties,n=>(i(),l("span",{key:`${a.id}-${n}`,class:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full"},u(n),1))),128))],64))),128)):p("",!0)]),k(r.Button,{href:`/products/${t.product.id}`,variant:"primary",size:"sm",classes:"w-full justify-center"},{default:z(()=>e[1]||(e[1]=[w(" View Details ")])),_:1},8,["href"])])])}const ve=v(le,[["render",xe]]),Pe={components:{ProductCard:ve},props:{products:{type:Array,required:!0},categories:{type:Array,required:!0,validator:o=>o.every(e=>typeof e=="object"&&e.name&&e.id)},searchQuery:{type:String,default:""},selectedCategories:{type:Array,default:()=>[]},selectedProperties:{type:Array,default:()=>[]}},data(){return{sortBy:"featured"}},computed:{filteredProducts(){return this.products.filter(o=>{const e=this.searchQuery===""||o.name.toLowerCase().includes(this.searchQuery.toLowerCase()),t=this.selectedCategories.length===0||this.selectedCategories.includes(o.category),r=this.selectedProperties.length===0||o.variations&&o.variations.some(d=>this.selectedProperties.every(c=>d.properties.includes(c)));return e&&t&&r})},sortedProducts(){return[...this.filteredProducts].sort((o,e)=>this.sortBy==="name"?o.name.localeCompare(e.name):(e.featured?1:0)-(o.featured?1:0))}},methods:{getCategoryName(o){const e=this.categories.find(t=>t.id===o);return e?e.name:"Uncategorized"}}},we={class:"flex justify-between items-center mb-6"},Ce={class:"text-gray-700"},Se={class:"font-semibold"},ke={class:"flex items-center"},Be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ae={key:0,class:"text-center py-12"};function je(o,e,t,r,d,c){const a=Q("product-card");return i(),l("div",null,[s("div",we,[s("div",Ce,[e[1]||(e[1]=w(" Showing ")),s("span",Se,u(c.filteredProducts.length),1),e[2]||(e[2]=w(" products "))]),s("div",ke,[e[4]||(e[4]=s("label",{for:"sort-by",class:"text-sm mr-2 text-gray-600"},"Sort by:",-1)),S(s("select",{id:"sort-by","onUpdate:modelValue":e[0]||(e[0]=n=>d.sortBy=n),class:"border border-gray-300 rounded-md text-sm p-2 focus:ring-primary-500 focus:border-primary-500"},e[3]||(e[3]=[s("option",{value:"featured"},"Featured",-1),s("option",{value:"price-low"},"Price: Low to High",-1),s("option",{value:"price-high"},"Price: High to Low",-1),s("option",{value:"name"},"Name",-1)]),512),[[N,d.sortBy]])])]),s("div",Be,[(i(!0),l(f,null,x(c.sortedProducts,n=>(i(),O(a,{key:n.id,product:n,"category-name":c.getCategoryName(n.category)},null,8,["product","category-name"]))),128))]),c.filteredProducts.length===0?(i(),l("div",Ae,e[5]||(e[5]=[s("span",{class:"material-symbols-outlined text-5xl text-gray-400 mb-4"},"search_off",-1),s("h3",{class:"text-xl font-bold text-gray-700"},"No products found",-1),s("p",{class:"text-gray-600 mt-2"},"Try adjusting your search or filters to find products.",-1)]))):p("",!0)])}const Fe=v(Pe,[["render",je]]),qe={__name:"ProductPage",props:{products:{type:Array,required:!0},categories:{type:Array,required:!0,validator:o=>o.every(e=>typeof e=="object"&&e.name&&e.id)},properties:{type:Array,required:!0}},setup(o,{expose:e}){e();const t=o;console.log("ProductPage props:",t);const r=P(""),d=P([]),c=P([]),a=g=>{r.value=g};j(()=>{const g=new URLSearchParams(window.location.search);C.on("search-updated",a);const _=g.get("category");if(_){const y=_.split(",").map(h=>h.trim()),L=t.categories.map(h=>h.id);d.value=y.filter(h=>L.includes(h))}const m=g.get("property");m&&(c.value=m.split(",").map(y=>y.trim()).filter(y=>t.properties.includes(y)))}),F(()=>{C.off("search-updated",a)});const n={props:t,searchQuery:r,selectedCategories:d,selectedProperties:c,handleSearchUpdate:a,ref:P,onMounted:j,onUnmounted:F,ProductFilters:Y,ProductList:Fe,get eventBus(){return C}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}},Le={class:"flex flex-col md:flex-row gap-8"},Ne={class:"md:w-1/4"},Ue={class:"md:w-3/4"};function Ie(o,e,t,r,d,c){return i(),l("div",Le,[s("div",Ne,[k(r.ProductFilters,{categories:r.props.categories,properties:r.props.properties,selectedCategories:r.selectedCategories,"onUpdate:selectedCategories":e[0]||(e[0]=a=>r.selectedCategories=a),selectedProperties:r.selectedProperties,"onUpdate:selectedProperties":e[1]||(e[1]=a=>r.selectedProperties=a)},null,8,["categories","properties","selectedCategories","selectedProperties"])]),s("div",Ue,[k(r.ProductList,{products:r.props.products,categories:r.props.categories,"search-query":r.searchQuery,"selected-categories":r.selectedCategories,"selected-properties":r.selectedProperties},null,8,["products","categories","search-query","selected-categories","selected-properties"])])])}const De=v(qe,[["render",Ie]]);export{De as default};
