const c="cart",n=()=>{try{const t=localStorage.getItem(c);if(t){const r=JSON.parse(t);if(d(r))return r}}catch(t){console.error("Error reading cart from localStorage:",t)}return{items:[]}},a=t=>{try{localStorage.setItem(c,JSON.stringify(t)),console.log("Cart saved to localStorage:",t)}catch(r){console.error("Error saving cart to localStorage:",r)}},l=(t,r=1)=>{const e=n(),o=e.items.find(s=>s.product.id===t.id);o?o.quantity+=r:e.items.push({product:t,quantity:r}),a(e)},m=(t,r)=>{const e=n();if(r<=0){i(t);return}const o=e.items.find(s=>s.product.id===t);o&&(o.quantity=Math.min(r,99),a(e))},i=t=>{const r=n();r.items=r.items.filter(e=>e.product.id!==t),a(r)},g=()=>{a({items:[]}),window.dispatchEvent(new Event("storage"))},d=t=>t&&Array.isArray(t.items)&&t.items.every(r=>r&&typeof r.quantity=="number"&&r.product&&typeof r.product.id=="string"&&typeof r.product.name=="string");export{l as a,g as c,n as g,i as r,m as u};
